# nano_smart_response.py - ูุธุงู ุงูุฑุฏูุฏ ุงูุฐูู ูุงููุชุทูุฑ ููุงูู - ุงูุฅุตุฏุงุฑ ุงูููุงุฆู
import json
import re
from typing import Dict, List, Optional, Tuple
from datetime import datetime
import random

class NanoSmartResponse:
    """ูุธุงู ุงูุฑุฏูุฏ ุงูุฐูู ูุงููุชุทูุฑ ููุงูู - ุงูุฅุตุฏุงุฑ ุงูููุงุฆู"""
    
    def __init__(self):
        self.knowledge_base = self.initialize_knowledge_base()
        self.conversation_context = []
        
    def initialize_knowledge_base(self) -> Dict:
        """ูุงุนุฏุฉ ุงููุนุฑูุฉ ุงูุดุงููุฉ ููุงูู"""
        return {
            "geography": {
                "ุนุงุตูุฉ_ุงูุณุนูุฏูุฉ": "ุงูุฑูุงุถ ูู ุนุงุตูุฉ ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ ุงูุญุจูุจุฉ ๐๏ธ๐ธ๐ฆ",
                "ูุฏู_ุฑุฆูุณูุฉ": {
                    "ุงูุฑูุงุถ": "ุนุงุตูุฉ ุงูููููุฉ ููุฑูุฒ ุงูุงูุชุตุงุฏ ูุงูุณูุงุณุฉ",
                    "ุฌุฏุฉ": "ุนุฑูุณ ุงูุจุญุฑ ุงูุฃุญูุฑ ูุจูุงุจุฉ ุงูุญุฑููู ุงูุดุฑูููู",
                    "ููุฉ ุงูููุฑูุฉ": "ุฃูุฏุณ ุจูุงุน ุงูุฃุฑุถ ููุจูุฉ ุงููุณูููู",
                    "ุงููุฏููุฉ ุงููููุฑุฉ": "ูุฏููุฉ ุงูุฑุณูู ๏ทบ ูุงููุณุฌุฏ ุงููุจูู ุงูุดุฑูู",
                    "ุงูุฏูุงู": "ุนุงุตูุฉ ุงูููุทูุฉ ุงูุดุฑููุฉ ููุฑูุฒ ุงูุจุชุฑูู",
                    "ุงูุทุงุฆู": "ูุตูู ุงูููููุฉ ููุฏููุฉ ุงููุฑุฏ ูุงูุนุณู"
                }
            },
            
            "religion": {
                "ุฃุฐูุงุฑ_ุตุจุงุญ_ูุณุงุก": [
                    "ุฃุนูุฐ ุจุงููู ูู ุงูุดูุทุงู ุงูุฑุฌููุ ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู",
                    "ุณุจุญุงู ุงููู ูุจุญูุฏูุ ุณุจุญุงู ุงููู ุงูุนุธูู",
                    "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ",
                    "ุงูููู ุตู ูุณูู ูุจุงุฑู ุนูู ูุจููุง ูุญูุฏ",
                    "ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู ุงูุฐู ูุง ุฅูู ุฅูุง ูู ุงูุญู ุงููููู ูุฃุชูุจ ุฅููู",
                    "ุงูุญูุฏ ููู ุฑุจ ุงูุนุงููููุ ุงูุฑุญูู ุงูุฑุญููุ ูุงูู ููู ุงูุฏูู",
                    "ูุง ุญูู ููุง ููุฉ ุฅูุง ุจุงููู ุงูุนูู ุงูุนุธูู"
                ],
                "ุฃุฏุนูุฉ_ูุฃุซูุฑุฉ": [
                    "ุฑุจูุง ุขุชูุง ูู ุงูุฏููุง ุญุณูุฉ ููู ุงูุขุฎุฑุฉ ุญุณูุฉ ูููุง ุนุฐุงุจ ุงููุงุฑ",
                    "ุงูููู ุงูุฏูู ูููู ูุฏูุชุ ูุนุงููู ูููู ุนุงููุชุ ูุชูููู ูููู ุชูููุช",
                    "ุงูููู ุฃุนูู ุนูู ุฐูุฑู ูุดูุฑู ูุญุณู ุนุจุงุฏุชู",
                    "ุงูููู ุงุบูุฑ ูู ุฐูุจู ูุฎุทุฆู ูุฌููู",
                    "ุฑุจ ุงุดุฑุญ ูู ุตุฏุฑู ููุณุฑ ูู ุฃูุฑู",
                    "ุงูููู ุฅูู ุนูู ุชุญุจ ุงูุนูู ูุงุนู ุนูู"
                ]
            },
            
            "congratulations": {
                "ุชุฑููุฉ": [
                    "ุฃูู ูุจุฑูู ุงูุชุฑููุฉ! ุงููู ูุจุงุฑู ูู ููุฒูุฏู ูู ูุถูู ๐",
                    "ุชุณุชุงูู ูู ุฎูุฑุ ูุจุฑูู ุงูุชุฑููุฉ ูุฅู ุดุงุก ุงููู ุฏุงููุงู ููุฃูุงู ๐",
                    "ุงููู ููุฑูู! ูุจุฑูู ุงูุชุฑููุฉ ูุนูุจุงู ุงูููุงุตุจ ุงูุฃุนูู ๐",
                    "ุนูุจุงู ูุง ุชุตูุฑ ูุฏูุฑ ุนุงู! ูุจุฑูู ุงูุชุฑููุฉ ูุจุงูุชูููู ๐ผ"
                ],
                "ูุฌุงุญ": [
                    "ุฃูู ูุจุฑูู ุงููุฌุงุญ! ุชุนุจู ูุณูุฑู ูุง ุฑุงุญ ุณุฏู ๐",
                    "ุงููู ูุจุงุฑู ููุ ูุจุฑูู ุงููุฌุงุญ ูุนูุจุงู ุฏุฑุฌุงุช ุฃุนูู โจ",
                    "ุชุณุชุงูู ูู ุฎูุฑุ ูุจุฑูู ุงููุฌุงุญ ูุงูุชููู ๐",
                    "ูุฑุญุชู ูุฑุญุชูุง! ูุจุฑูู ุงููุฌุงุญ ูุฅู ุดุงุก ุงููู ุงููุณุชูุจู ุฃุญูู ๐"
                ],
                "ุฒูุงุฌ": [
                    "ุฃูู ูุจุฑูู! ุงููู ูุจุงุฑู ููู ููุฌูุน ุจูููู ูู ุฎูุฑ ๐",
                    "ูุจุฑูู ุงูุฒูุงุฌุ ุงููู ูุชูู ุนูููู ุจุงูุฎูุฑ ูุงูุจุฑูุฉ ๐",
                    "ุจุงูุฑูุงู ูุงูุจูููุ ูุจุฑูู ุงูุฒูุงุฌ ุงูุณุนูุฏ โค๏ธ",
                    "ุนูุจุงู ูุฑุญุฉ ุงูุฃููุงุฏ! ูุจุฑูู ุงูุฒูุงุฌ ๐ถ"
                ]
            },
            
            "general_knowledge": {
                "ูุงูู_ูุนูููุงุช": {
                    "ุงูุงุณู": "ุฃูุง ูุงููุ ูุณุงุนุฏู ุงูุฐูู ุจุงูููุฌุฉ ุงูุณุนูุฏูุฉ ุงูุฃุตููุฉ! ๐ค",
                    "ุงูููุงู": [
                        "๐ ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ุงูุนุงูุฉ ูุงูุซูุงููุฉ",
                        "๐บ๏ธ ูุนูููุงุช ุนู ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ",
                        "๐คฒ ุชุฐููุฑ ุจุงูุฃุฐูุงุฑ ูุงูุฃุฏุนูุฉ ุงููุฃุซูุฑุฉ",
                        "๐ ุชููุฆุฉ ุจุงูููุงุณุจุงุช ุงูุณุนูุฏุฉ ูุงูุฅูุฌุงุฒุงุช",
                        "๐ฌ ูุญุงุฏุซุฉ ูุฏุฑุฏุดุฉ ููุชุนุฉ ููููุฏุฉ",
                        "โฐ ูุนุฑูุฉ ุงูููุช ูุงูุชุงุฑูุฎ ุงูุญุงูู",
                        "๐ง ูุตุงุฆุญ ูุญููู ูููุดุงูู ุงูููููุฉ",
                        "๐ ุฏุนู ููุณู ูุชุญููุฒ ุฅูุฌุงุจู"
                    ]
                }
            }
        }
    
    def detect_intent_advanced(self, text: str) -> Tuple[str, float]:
        """ุชุญุฏูุฏ ููุฉ ุงููุณุชุฎุฏู ุงููุชูุฏู"""
        text_clean = text.lower().strip()
        
        # ุฃููุงุท ูุญุฏุฏุฉ ุจุฏูุฉ ุฃูุจุฑ
        patterns = {
            "geography_question": [
                r"ูุด ุนุงุตูุฉ|ุฅูุด ุนุงุตูุฉ|ุนุงุตูุฉ ุงูุณุนูุฏูุฉ|ุนุงุตูุฉ ุงูููููุฉ",
                r"ูุฏู ุณุนูุฏูุฉ|ูุฏู ุงูููููุฉ|ุฃูู ุงููุฏู",
                r"ููู ุงูุฑูุงุถ|ููู ุฌุฏุฉ|ููู ููุฉ|ูุนูููุงุช ุนู"
            ],
            "time_question": [
                r"ูู ุงูุณุงุนุฉ|ูุด ุงูููุช|ุงูููุช ุงูุญูู|ุงูุณุงุนุฉ ูู",
                r"ุฃู ููู|ุงูููู ุดูู|ุงูุชุงุฑูุฎ|ุชุงุฑูุฎ ุงูููู"
            ],
            "personal_question": [
                r"ููู ุงูุช|ูู ุงูุช|ุดูู ุงุณูู|ุงุณูู ุฅูุด",
                r"ุชุนุฑูู ููุณู|ูุด ุชูุฏุฑ ุชุณูู|ูุฏุฑุงุชู|ููุงุฑุงุชู"
            ],
            "religious_request": [
                r"ุงุฐูุฑ ุฑุจู|ููู ุฐูุฑ|ุฃุฐูุงุฑ|ุชุณุจูุญ|ุงุณุชุบูุงุฑ",
                r"ุงุฏุน ูู|ุงุฏุนู ูู|ุฏุนุงุก|ุงูููู|ุฑุจูุง",
                r"ุขูุฉ|ุญุฏูุซ|ูุฑุขู|ุณูุฑุฉ"
            ],
            "congratulation": [
                r"ุชุฑููุช|ุงุชุฑููุช|ุญุตูุช ุนูู ุชุฑููุฉ|ุชุฑูููู|ุฑูููู",
                r"ูุฌุญุช|ุชุฎุฑุฌุช|ูุฌุงุญู|ุชุฎุฑุฌู|ุฎูุตุช ุงูุฌุงูุนุฉ",
                r"ุชุฒูุฌุช|ุฎุทุจุช|ุนุฑุณู|ุฒูุงุฌู|ุฎุทูุจุชู",
                r"ุญุตูุช ุนูู|ูุฒุช|ุฑุจุญุช|ุญููุช"
            ],
            "greeting": [
                r"ุตุจุงุญ ุงูุฎูุฑ|ูุณุงุก ุงูุฎูุฑ|ุฃููุง|ูุฑุญุจุง|ููุง|ุงูุณูุงู ุนูููู",
                r"ููู ุงูุญุงู|ูููู|ุดูููู|ุฅูุด ุฃุฎุจุงุฑู"
            ],
            "farewell": [
                r"ุจุงู|ูุฏุงุน|ุงููู ูุนู|ุชุตุจุญ ุนูู ุฎูุฑ|ูู ุฃูุงู ุงููู",
                r"ูุน ุงูุณูุงูุฉ|ุฎูุงุต|ููุง ุจุงู"
            ],
            "gratitude": [
                r"ุดูุฑุง|ุดูุฑุงู|ูุนุทูู ุงูุนุงููุฉ|ุฌุฒุงู ุงููู ุฎูุฑ|ุงููู ููุฑูู",
                r"ุชุณูู|ูุง ูุตุฑุช|ูุซุฑ ุฎูุฑู"
            ],
            "emotion_sad": [
                r"ุชุนุจุงู|ุฒุนูุงู|ุญุฒูู|ููุชุฆุจ|ุถุงูู|ูุชุถุงูู",
                r"ูู ูุฑุชุงุญ|ุญุงุณุณ ุจุถูู|ุตุฏุฑู ุถุงูู"
            ],
            "emotion_happy": [
                r"ูุฑุญุงู|ูุจุณูุท|ุณุนูุฏ|ูุฑุชุงุญ|ููุจุณุท|ูุชุญูุณ",
                r"ุญุงุณุณ ุจูุฑุญุฉ|ุงูุญูุฏููู ูุฑุชุงุญ"
            ],
            "need_help": [
                r"ุณุงุนุฏูู|ูุญุชุงุฌ ูุณุงุนุฏุฉ|ุฃุจู ูุณุงุนุฏุฉ|ุชูุฏุฑ ุชุณุงุนุฏูู",
                r"ูุง ุฃุฏุฑู ูุด ุฃุณูู|ูุง ุนูุฏู ุดู ุฃุณููู|ููู|ุฒูู"
            ]
        }
        
        # ุงูุจุญุซ ุนู ุงูุชุทุงุจูุงุช
        for intent, pattern_list in patterns.items():
            for pattern in pattern_list:
                if re.search(pattern, text_clean):
                    confidence = 0.95 if len(re.findall(pattern, text_clean)) > 0 else 0.8
                    return intent, confidence
        
        # ุฅุฐุง ูู ูุฌุฏ ุชุทุงุจู ูุญุฏุฏุ ูุญุฏุฏ ุจูุงุก ุนูู ุงููููุงุช ุงูููุชุงุญูุฉ
        if "?" in text or "ุ" in text:
            return "general_question", 0.7
        
        return "general_conversation", 0.5
    
    def generate_smart_response(self, user_input: str) -> str:
        """ุชูููุฏ ุงูุฑุฏ ุงูุฐูู ูุงูููุงุณุจ"""
        intent, confidence = self.detect_intent_advanced(user_input)
        
        # ุฅุถุงูุฉ ุงูุณูุงู ูููุญุงุฏุซุฉ
        self.conversation_context.append({
            "user_input": user_input,
            "intent": intent,
            "confidence": confidence,
            "timestamp": datetime.now()
        })
        
        # ุชูููุฏ ุงูุฑุฏ ุงูููุงุณุจ
        if intent == "geography_question":
            return self.handle_geography_question(user_input)
        elif intent == "time_question":
            return self.handle_time_question(user_input)
        elif intent == "personal_question":
            return self.handle_personal_question(user_input)
        elif intent == "religious_request":
            return self.handle_religious_request(user_input)
        elif intent == "congratulation":
            return self.handle_congratulation(user_input)
        elif intent == "greeting":
            return self.handle_greeting(user_input)
        elif intent == "farewell":
            return self.handle_farewell(user_input)
        elif intent == "gratitude":
            return self.handle_gratitude(user_input)
        elif intent == "emotion_sad":
            return self.handle_sad_emotion(user_input)
        elif intent == "emotion_happy":
            return self.handle_happy_emotion(user_input)
        elif intent == "need_help":
            return self.handle_help_request(user_input)
        elif intent == "general_question":
            return self.handle_general_question(user_input)
        else:
            return self.handle_general_conversation(user_input)
    
    def handle_geography_question(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุฃุณุฆูุฉ ุงูุฌุบุฑุงููุง"""
        text_lower = text.lower()
        
        if "ุนุงุตูุฉ" in text_lower and ("ุณุนูุฏ" in text_lower or "ููููุฉ" in text_lower):
            return self.knowledge_base["geography"]["ุนุงุตูุฉ_ุงูุณุนูุฏูุฉ"]
        
        cities = self.knowledge_base["geography"]["ูุฏู_ุฑุฆูุณูุฉ"]
        
        for city, description in cities.items():
            if city in text_lower or any(part in text_lower for part in city.split()):
                return f"๐๏ธ {city}: {description}"
        
        if "ูุฏู" in text_lower:
            city_list = ", ".join(list(cities.keys())[:4])
            return f"ูู ุฃูู ูุฏู ุงูููููุฉ: {city_list} ูุบูุฑูุง ุงููุซูุฑ ูู ุงููุฏู ุงูุฌูููุฉ ๐ธ๐ฆ"
        
        return "ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ ุจูุฏ ูุงุณุน ูุฌูููุ ููู ูุฏู ููุญุงูุธุงุช ูุซูุฑุฉ ูู ูุญุฏุฉ ููุง ุทุงุจุนูุง ุงูุฎุงุต ๐บ๏ธ"
    
    def handle_time_question(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุฃุณุฆูุฉ ุงูููุช"""
        current_time = datetime.now()
        
        if any(word in text.lower() for word in ["ุณุงุนุฉ", "ููุช"]):
            time_str = current_time.strftime("%H:%M")
            # ุชุญุฏูุฏ ูุชุฑุฉ ุงูููู
            hour = current_time.hour
            if 5 <= hour < 12:
                period = "ุตุจุงุญ ุงูุฎูุฑ! โ๏ธ"
            elif 12 <= hour < 17:
                period = "ุธูุฑู ุณุนูุฏ! ๐ค๏ธ"
            elif 17 <= hour < 20:
                period = "ูุณุงุก ุงูุฎูุฑ! ๐"
            else:
                period = "ูุณุงุก ุงูุฎูุฑ! ๐"
            
            return f"{period}\nุงูููุช ุงูุญูู ุงูุณุงุนุฉ {time_str} ๐"
        
        if "ููู" in text.lower() or "ุชุงุฑูุฎ" in text.lower():
            date_str = current_time.strftime("%Y-%m-%d")
            # ุฃุณูุงุก ุงูุฃูุงู ุจุงูุนุฑุจู
            days = ["ุงูุงุซููู", "ุงูุซูุงุซุงุก", "ุงูุฃุฑุจุนุงุก", "ุงูุฎููุณ", "ุงูุฌูุนุฉ", "ุงูุณุจุช", "ุงูุฃุญุฏ"]
            day_name = days[current_time.weekday()]
            return f"ุงูููู {day_name} ุงูููุงูู {date_str} ๐"
        
        return f"ุงูููุช: {current_time.strftime('%H:%M')} ูุงูุชุงุฑูุฎ: {current_time.strftime('%Y-%m-%d')} โฐ"
    
    def handle_personal_question(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงูุฃุณุฆูุฉ ุงูุดุฎุตูุฉ ุนู ูุงูู"""
        text_lower = text.lower()
        
        if any(word in text_lower for word in ["ููู", "ุงุณู", "ูู ุงูุช", "ุชุนุฑูู"]):
            return self.knowledge_base["general_knowledge"]["ูุงูู_ูุนูููุงุช"]["ุงูุงุณู"] + \
                   "\nููุง ุนุดุงู ุฃุณุงุนุฏู ูู ุฃู ุดู ุชุญุชุงุฌูุ ูู ูุนูููุงุช ูุฃุณุฆูุฉ ูุญุชู ูุญุงุฏุซุฉ ุญููุฉ โ"
        
        if any(word in text_lower for word in ["ุชูุฏุฑ", "ููุงุฑุงุช", "ูุฏุฑุงุช"]):
            tasks = self.knowledge_base["general_knowledge"]["ูุงูู_ูุนูููุงุช"]["ุงูููุงู"]
            task_list = "\n".join(tasks)
            return f"ุฃูุฏุฑ ุฃุณุงุนุฏู ูู ุฃุดูุงุก ูุซูุฑุฉ:\n\n{task_list}\n\nูุฃุดูุงุก ูุซูุฑุฉ ุซุงููุฉ! ุฌุฑุจ ุฃุณุฃููู ุฃู ุดู ๐"
        
        return "ุฃูุง ููุง ุนุดุงูู! ุฃุณุฃููู ุฃู ุดู ุชุจู ุชุนุฑูู ุฃู ุชุญุชุงุฌ ูุณุงุนุฏุฉ ููู ๐"
    
    def handle_religious_request(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงูุทูุจุงุช ุงูุฏูููุฉ"""
        text_lower = text.lower()
        
        if any(word in text_lower for word in ["ุงุฐูุฑ", "ุฐูุฑ", "ุชุณุจูุญ", "ุฃุฐูุงุฑ"]):
            dhikr = random.choice(self.knowledge_base["religion"]["ุฃุฐูุงุฑ_ุตุจุงุญ_ูุณุงุก"])
            return f"ุฅููู ูุฐุง ุงูุฐูุฑ ุงููุจุงุฑู:\n\n๐คฒ {dhikr}\n\nุฌุนูู ุงููู ูู ููุฒุงู ุญุณูุงุชู"
        
        if any(word in text_lower for word in ["ุงุฏุน", "ุฏุนุงุก", "ุงูููู", "ุฑุจูุง"]):
            dua = random.choice(self.knowledge_base["religion"]["ุฃุฏุนูุฉ_ูุฃุซูุฑุฉ"])
            return f"ุงูููู ุขููู:\n\n๐คฒ {dua}\n\nุงูููู ุงุณุชุฌุจ ุฏุนุงุกูุง ูุชูุจู ููุง"
        
        if "ุงุณุชุบูุงุฑ" in text_lower:
            return "ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู ุงูุฐู ูุง ุฅูู ุฅูุง ูู ุงูุญู ุงููููู ูุฃุชูุจ ุฅููู\n\n๐คฒ ุงูููู ุงุบูุฑ ููุง ุฐููุจูุง ูุชูุจู ุชูุจุชูุง"
        
        return "ุจุงุฑู ุงููู ููู ุนูู ูุฐุง ุงูุณุคุงู ุงูุทูุจ ๐คฒ\nุงูููู ุงูุฏูุง ูุงูุฏ ุจูุง ูุงุฌุนููุง ุณุจุจุงู ููู ุงูุชุฏู"
    
    def handle_congratulation(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงูุชูุงูู ูุงูููุงุณุจุงุช"""
        text_lower = text.lower()
        
        if any(word in text_lower for word in ["ุชุฑููุช", "ุชุฑููุฉ", "ููุตุจ", "ูุธููุฉ ุฌุฏูุฏุฉ"]):
            return random.choice(self.knowledge_base["congratulations"]["ุชุฑููุฉ"])
        
        if any(word in text_lower for word in ["ูุฌุญุช", "ุชุฎุฑุฌุช", "ูุฌุงุญ", "ุชุฎุฑุฌ"]):
            return random.choice(self.knowledge_base["congratulations"]["ูุฌุงุญ"])
        
        if any(word in text_lower for word in ["ุชุฒูุฌุช", "ุฒูุงุฌ", "ุนุฑุณ", "ุฎุทุจุช"]):
            return random.choice(self.knowledge_base["congratulations"]["ุฒูุงุฌ"])
        
        return "ุฃูู ุฃูู ูุจุฑูู! ุงููู ูุจุงุฑู ูู ููุฒูุฏู ูู ูุถูู ููุฑูู ๐โจ"
    
    def handle_greeting(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงูุชุญูุงุช"""
        greetings = [
            "ุฃููุงู ูุณููุงู ุจู! ููู ุญุงูู ุงููููุ ๐",
            "ุญูุงู ุงููู! ุฅูุด ุงููู ุชุญุชุงุฌูุ ๐",
            "ูุฑุญุจุง ุจู! ููุฑุช ุงูููุงู โจ",
            "ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู ๐คฒ",
            "ุฃูููู! ููู ุงูุตุญุฉ ูุงูุนุงููุฉุ ๐",
            "ูุง ููุง ูุงููู! ููู ุงูุฃุญูุงูุ ๐ค"
        ]
        
        if "ุงูุณูุงู ุนูููู" in text.lower():
            return "ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู ๐คฒ\nุฃููุงู ูุณููุงู ุจูุ ููู ุญุงููุ"
        
        return random.choice(greetings)
    
    def handle_farewell(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงููุฏุงุน"""
        farewells = [
            "ุงููู ูุนู! ุชุตุจุญ ุนูู ุฎูุฑ ๐",
            "ุจุงู ุจุงู! ุฅู ุดุงุก ุงููู ูุดููู ูุฑูุจุงู ๐",
            "ูู ุฃูุงู ุงูููุ ุงุนุชูู ุจููุณู ๐ค",
            "ูุนุทูู ุงูุนุงููุฉุ ุงููู ูุญูุธู ๐คฒ",
            "ูุน ุงูุณูุงูุฉุ ูููุฑุช ุงูููุงู! โจ",
            "ุงููู ูููููุ ูุฏุงููุงู ูู ุงูุฎุฏูุฉ! ๐"
        ]
        return random.choice(farewells)
    
    def handle_gratitude(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงูุดูุฑ"""
        gratitude_responses = [
            "ุงููู ูุนุงููู! ูุง ุณููุช ุดู ูุณุชุงูู ุงูุดูุฑ ๐",
            "ูู ุนููููุ ุฃู ููุช ุชุญุชุงุฌ ูุณุงุนุฏุฉ! ๐ค",
            "ููุงูุ ูุฐุง ูุงุฌุจู ูุฃูุง ุณุนูุฏ ุฅูู ุณุงุนุฏุชู โบ๏ธ",
            "ุงููู ููุฑููุ ุฃูุง ูู ุงูุฎุฏูุฉ ุฏุงููุงู ๐",
            "ูุง ุนููู ุดูุฑุ ุฅุญูุง ููุง ุนุดุงูู! โค๏ธ",
            "ุชุณููุ ุงููู ูุฎููู! ุฏุงููุงู ูู ุงูุฎุฏูุฉ ๐ค"
        ]
        return random.choice(gratitude_responses)
    
    def handle_sad_emotion(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงููุดุงุนุฑ ุงูุญุฒููุฉ"""
        supportive_responses = [
            "ุงููู ูุนุทูู ุงูููุฉุ ุฅู ุดุงุก ุงููู ูู ุดู ุจูุตูุฑ ุฃุญุณู ๐ค\nุฃูุง ููุง ุฅุฐุง ุชุจู ุชุญูู ุฃู ุชุญุชุงุฌ ุฃู ุดู",
            "ูุง ุชุฒุนูุ ุงูุญูุงุฉ ูููุง ุตุนูุฏ ููุฒูู ูุงูููู ุฅูู ุชุชุฌุงูุฒ ุงูุตุนุงุจ ๐ช\nุฏุงููุงู ูุงูุฑ ุฅู ุจุนุฏ ุงูุนุณุฑ ูุณุฑ",
            "ุญุงุณุณ ุจุถูููุ ุจุณ ุงููู ูุง ูููู ููุณ ุฅูุง ูุณุนูุง ๐คฒ\nุงุณุชุบูุฑ ูุซูุฑ ูุงุฏุน ุฑุจูุ ูู ูุฌูุจ ุงูุฏุนูุงุช",
            "ุฃุนุฑู ุฅูู ุชูุฑ ุจููุช ุตุนุจุ ุจุณ ุชุฃูุฏ ุฅู ูุฐุง ูู ููุงูุฉ ุงูุนุงูู ๐\nูู ูุดููุฉ ูููุง ุญู ุจุฅุฐู ุงููู"
        ]
        return random.choice(supportive_responses)
    
    def handle_happy_emotion(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงููุดุงุนุฑ ุงูุณุนูุฏุฉ"""
        happy_responses = [
            "ุงููู ูุฏูู ุนููู ุงููุฑุญุฉ ูุงูุณุนุงุฏุฉ! ๐โจ\nุฅูุด ุงูููุงุณุจุฉ ุงูุญููุฉุ",
            "ุญูู ุดููู ูุจุณูุท! ุงููู ูุฒูุฏ ูุฑุญุชู ๐\nุดุงุฑููู ุฅูุด ุงููู ูุฑุญู",
            "ูุง ุดุงุก ุงููู ุนููู! ุงูุณุนุงุฏุฉ ุชุทูุน ูู ุนูููู ๐\nุงููู ูุญูุธ ูู ูุฑุญุชู",
            "ูุง ุงููู ุนูู ุงูุทุงูุฉ ุงูุฅูุฌุงุจูุฉ! ๐\nูุฑุญุชู ุชูุฑุญ ุงูููุจุ ุงููู ูุฏูููุง ุนููู"
        ]
        return random.choice(happy_responses)
    
    def handle_help_request(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุทูุจุงุช ุงููุณุงุนุฏุฉ"""
        text_lower = text.lower()
        
        if any(word in text_lower for word in ["ููู", "ุฒูู", "ูุง ุฃุฏุฑู ูุด ุฃุณูู"]):
            return """ูููุชู! ุงูููู ุดู ุทุจูุนู ูุตูุฑ ูููู ๐
            
ุฅููู ุจุนุถ ุงูุฃููุงุฑ ุงูุญููุฉ:
๐ ุงูุฑุง ูุชุงุจ ุฃู ููุงู ูููุฏ
๐ฌ ุดุงูุฏ ูููู ูุซุงุฆูู ุฃู ููุฏูููุงุช ุชุนููููุฉ
๐ฅ ุชูุงุตู ูุน ุงูุฃุตุฏูุงุก ูุงูุฃูู
๐โโ๏ธ ุงูุงุฑุณ ุฑูุงุถุฉ ุฃู ุชูุงุฑูู ุฎูููุฉ
๐จ ุฌุฑุจ ููุงูุฉ ุฌุฏูุฏุฉ ุฒู ุงูุฑุณู ุฃู ุงููุชุงุจุฉ
๐ณ ุทุจุฎ ูุตูุฉ ุฌุฏูุฏุฉ
๐งน ุฑุชุจ ุงูุจูุช ุฃู ุงูุบุฑูุฉ
๐ฑ ุชุนูู ููุงุฑุฉ ุฌุฏูุฏุฉ ูู ุงููุช

ุฅูุด ุฑุฃููุ ุฃู ูุงุญุฏ ูุนุฌุจู ุฃูุซุฑุ"""
        
        if "ูุญุชุงุฌ ูุณุงุนุฏุฉ" in text_lower or "ุณุงุนุฏูู" in text_lower:
            return "ุทุจุนุงู! ุฃูุง ููุง ุนุดุงู ุฃุณุงุนุฏู ๐ค\nููู ูู ุฅูุด ุงููุดููุฉ ุฃู ุฅูุด ุงููู ุชุญุชุงุฌู ุจุงูุถุจุทุ ูุฅู ุดุงุก ุงููู ูููู ูู ุญู"
        
        return "ุฃูุง ููุง ุนุดุงูู! ๐\nููู ูู ุฅูุด ุงููู ุชุญุชุงุฌู ูุฅู ุดุงุก ุงููู ุฃูุฏุฑ ุฃุณุงุนุฏู"
    
    def handle_general_question(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงูุฃุณุฆูุฉ ุงูุนุงูุฉ"""
        return "ุณุคุงู ุญูู! ๐ค\nูููู ุชูุถุญ ุฃูุซุฑ ุนุดุงู ุฃูุฏุฑ ุฃุนุทูู ุฌูุงุจ ููุตู ููููุฏุ"
    
    def handle_general_conversation(self, text: str) -> str:
        """ุงูุชุนุงูู ูุน ุงููุญุงุฏุซุฉ ุงูุนุงูุฉ"""
        general_responses = [
            "ุฃุญุณ ุฅูู ุชุจู ุชุญูู ุนู ุดูุ ุฃูุง ูุณุชูุน ูู ๐",
            "ุฅูุด ุฑุฃูู ูุชููู ุนู ููุถูุน ููููุ ๐ฌ",
            "ุฃูุง ููุง ุฅุฐุง ุชุจู ุชุณููู ุฃู ุชุณุฃู ุนู ุฃู ุดู ๐",
            "ุญูู! ุฅูุด ุงููู ูู ุจุงูู ุชุญูู ุนููุ ๐ค",
            "ุฃุญุจ ุงูุฏุฑุฏุดุฉ ูุนู! ูุด ุงูุฃุฎุจุงุฑุ โ",
            "ูุง ููุง! ุฅูุด ุงููู ุฌุงุจู ุงููููุ ๐"
        ]
        return random.choice(general_responses)

def comprehensive_test():
    """ุงุฎุชุจุงุฑ ุดุงูู ูููุธุงู"""
    nano = NanoSmartResponse()
    
    test_cases = [
        "ูุด ุนุงุตูุฉ ุงูุณุนูุฏูุฉุ",
        "ุฃูุง ุชุฑููุช ูู ุงูุนูู!",
        "ุงุฐูุฑ ุฑุจู",
        "ูู ุงูุณุงุนุฉุ",
        "ููู ุงูุชุ",
        "ุตุจุงุญ ุงูุฎูุฑ",
        "ุดูุฑุงู ูู ูุง ูุงูู",
        "ุฃูุง ุชุนุจุงู ูููุชุฆุจ",
        "ุฃูุง ูุฑุญุงู ููุจุณูุท ุงูููู!",
        "ุณุงุนุฏูู ูุง ุฃุฏุฑู ูุด ุฃุณูู",
        "ุจุงู ุจุงู",
        "ุงูุณูุงู ุนูููู",
        "ูุด ุชูุฏุฑ ุชุณููุ",
        "ูุนูููุงุช ุนู ุฌุฏุฉ",
        "ุงุฏุน ูู",
        "ูุฌุญุช ูู ุงูุงูุชุญุงู!",
        "ุฃู ููู ุงููููุ",
        "ุฃูุง ุฒุนูุงู ูู ุตุฏููู"
    ]
    
    print("๐ ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุฐูู ุงูุดุงูู ููุงูู")
    print("=" * 60)
    
    for i, test_input in enumerate(test_cases, 1):
        response = nano.generate_smart_response(test_input)
        print(f"\n{i:2d}. ๐ค ุงููุณุชุฎุฏู: {test_input}")
        print(f"    ๐ค ูุงูู: {response}")
        print("-" * 50)

if __name__ == "__main__":
    comprehensive_test()